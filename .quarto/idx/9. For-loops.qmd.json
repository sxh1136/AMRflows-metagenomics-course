{"title":"9. Automating read quality control with for loops","markdown":{"headingText":"9. Automating read quality control with for loops","containsRefs":false,"markdown":"Now that you've learned how to use fastp to perform read quality control and preprocessing on a single file, let's explore how to scale up your analysis to process multiple files efficiently. This is where the concept of \"for loops\" comes into play.\n\nA for loop is like a magical spell in coding. It allows you to repeat a sequence of commands for each item in a list, making it perfect for automating repetitive tasks, such as processing multiple read files. Think of it as a conveyor belt that moves each file through the fastp process one by one.\n\n### How to Use for Loops with fastp\n\nStep 1: Organize Your Files\n\nBefore you start, make sure all your raw sequencing data files are in the same directory. This directory should contain all the files you want to process.\n\nStep 2: Writing the Loop\n\nOpen a command line or terminal window and navigate to the directory where your files are located. Make sure you are in your fastp conda environment. Now, let's write a for loop to run fastp on all the files in the directory.\n\n```bash\nfor file in *.fastq; do fastp -i ${file} -o processed_${file}; done\n```\nLets break down what each part of the for loop does:\n\n* `for file in *.fastq`: This line tells the loop to go through each file with the \".fastq\" extension in the current directory. The asterisk is a wildcard. This means that any string can come before \".fastq\". \n    \n* `do`: Marks the beginning of the loop.\n\n* `fastp -i ${file} -o processed_${file}`: This is the fastp command, just like the one you used before. `${file}` takes each file that we specified before (the ones that end in \".fastq\") and places it into the fastp command. The output files will be named as the fastq file name with the prefix \"processed_\".\n\n* `done`: Marks the end of the loop.\n\nWhen you run this loop, it will automatically process each .fastq file in the directory, one after the other. You don't have to type the fastp command for each file manually. This is a huge time-saver, especially when you have many files to process.\n\nNote: You can replace \"file\" with any name you like; it's just a variable that represents each file in the list. For example the following for loop works identically:\n\n```bash\nfor capybaras in *.fastq; do fastp -i ${capybaras} -o processed_${capybaras}; done\n```\n\nIts normally easier to use simple variables like \"file\" or just single letters like \"f\" or \"i\".\n\nYou can use the `echo` command to see what commands the for loop is iterating. You place `echo` after the `do` and encase the command in quotes:\n\n```bash\nfor file in *.fastq; do echo \"fastp -i ${file} -o processed_${file}\"; done\n```\n\n### Recap and Practice\n\nIn this section, you've discovered the power of for loops in automating repetitive tasks, such as read quality control. You've learned how to use a simple for loop to apply the fastp command to multiple files at once, and you've used the echo command to keep track of the processing.\n\nNow, it's time to put your knowledge into practice:\n\n#### Exercise\n\n* Activate your fastp conda environment.\n\n* Navigate to the directory containing your raw sequencing data files.\n\n* Write a for loop like the ones above into your command line, using the variable name \"f\", echoing your fastp command, and name the fastp output with the prefix \"fastp_\".\n\n* If the echoed command looks correct, remove the echo and quotes and run the command.\n\n* Let the loop do its magic and process all your .fastq files automatically while displaying processing messages. This might take awhile.\n\n<details>\n<summary>Example code for exercise</summary>\n\n```bash\nconda activate fastp_env\ncd sequencing_data\nfor file in *.fastq; do echo \"fastp -i ${file} -o processed_${file}\"; done\n```\n</details>\n\nOnce the loop finishes, you'll have fastp outputs for each fastq with a \"fastq_\" prefix. Feel free to examine them and ensure that the quality control and preprocessing were successful.\n\nBy mastering the use of for loops and customizing variable names, you've unlocked a powerful tool for automating data analysis in metagenomics. In the next section, we'll build on this for loop and use it to process paired end sequencing data. \n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"markdown"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["styles.css"],"toc":true,"output-file":"9. For-loops.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.361","theme":{"light":"cosmo"},"code-copy":true,"code-block-border-left":true,"code-block-bg":true},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}